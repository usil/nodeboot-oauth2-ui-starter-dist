import { Inject, Injectable } from '@angular/core';
import { first } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
export class NodebootOauth2StarterService {
    constructor(http, configuration) {
        this.http = http;
        this.configuration = configuration;
        this.authUserApi = configuration.api + '/auth/user';
        this.authRoleApi = configuration.api + '/auth/role';
        this.authPartApi = configuration.api + '/auth/part';
        this.authClientApi = configuration.api + '/auth/client';
        this.authApplicationApi = configuration.api + '/auth/application ';
    }
    getUsers(pageIndex, order) {
        return this.http
            .get(this.authUserApi +
            `?pageIndex=${pageIndex}&&itemsPerPage=20&&order=${order}`)
            .pipe(first());
    }
    createUser(createUserData) {
        return this.http.post(this.authUserApi, createUserData).pipe(first());
    }
    updatePassword(userId, newPassword, oldPassword) {
        return this.http
            .put(`${this.authUserApi}/${userId}/password`, {
            newPassword,
            oldPassword,
        })
            .pipe(first());
    }
    updateUserRoles(userId, roles) {
        return this.http
            .put(`${this.authUserApi}/${userId}/role`, { roles })
            .pipe(first());
    }
    deleteUser(subjectId) {
        return this.http.delete(`${this.authUserApi}/${subjectId}`).pipe(first());
    }
    updateUser(subjectId, updateBody) {
        return this.http
            .put(`${this.authUserApi}/${subjectId}`, updateBody)
            .pipe(first());
    }
    getUserProfile() {
        return this.http
            .get(`${this.authUserApi}/profile/me`)
            .pipe(first());
    }
    getRolesBasic() {
        return this.http
            .get(this.authRoleApi + '?basic=true')
            .pipe(first());
    }
    createRole(identifier, allowedObject) {
        return this.http
            .post(this.authRoleApi, { identifier, allowedObject })
            .pipe(first());
    }
    updateRoleOptions(roleId, newAllowedObject, originalAllowedObject) {
        return this.http
            .put(this.authRoleApi + `/${roleId}/option`, {
            newAllowedObject,
            originalAllowedObject,
        })
            .pipe(first());
    }
    deleteRole(roleId) {
        return this.http.delete(this.authRoleApi + `/${roleId}`).pipe(first());
    }
    getRoles(pageIndex, order) {
        return this.http
            .get(this.authRoleApi +
            `?pageIndex=${pageIndex}&&itemsPerPage=20&&order=${order}`)
            .pipe(first());
    }
    getPartsBasic() {
        return this.http
            .get(this.authPartApi + `?basic=true`)
            .pipe(first());
    }
    getParts(pageIndex, order) {
        return this.http
            .get(this.authPartApi +
            `?pageIndex=${pageIndex}&&itemsPerPage=20&&order=${order}`)
            .pipe(first());
    }
    updatePartOptions(partId, newPartOptions, originalPartOptions) {
        return this.http
            .put(this.authPartApi + `/${partId}/option`, {
            newPartOptions,
            originalPartOptions,
        })
            .pipe(first());
    }
    deletePart(partId) {
        return this.http.delete(this.authPartApi + `/${partId}`);
    }
    createPart(partIdentifier, applications_id) {
        return this.http.post(this.authPartApi, {
            partIdentifier,
            applications_id,
        });
    }
    getClients(pageIndex, order) {
        return this.http
            .get(this.authClientApi +
            `?pageIndex=${pageIndex}&&itemsPerPage=20&&order=${order}`)
            .pipe(first());
    }
    createClient(createClientData) {
        return this.http
            .post(this.authClientApi, createClientData)
            .pipe(first());
    }
    deleteClient(subjectId) {
        return this.http.delete(`${this.authClientApi}/${subjectId}`).pipe(first());
    }
    updateClientRoles(clientId, roles) {
        return this.http
            .put(`${this.authClientApi}/${clientId}/role`, { roles })
            .pipe(first());
    }
    updateClient(subjectId, updateBody) {
        return this.http
            .put(`${this.authClientApi}/${subjectId}`, updateBody)
            .pipe(first());
    }
    getApplications() {
        return this.http.get(this.authApplicationApi);
    }
    get apiUrl() {
        return this.configuration.api;
    }
}
NodebootOauth2StarterService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.2", ngImport: i0, type: NodebootOauth2StarterService, deps: [{ token: i1.HttpClient }, { token: 'configuration' }], target: i0.ɵɵFactoryTarget.Injectable });
NodebootOauth2StarterService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.1.2", ngImport: i0, type: NodebootOauth2StarterService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.2", ngImport: i0, type: NodebootOauth2StarterService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Inject,
                    args: ['configuration']
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZWJvb3Qtb2F1dGgyLXN0YXJ0ZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25vZGVib290LW9hdXRoMi1zdGFydGVyL3NyYy9saWIvbm9kZWJvb3Qtb2F1dGgyLXN0YXJ0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQWMsS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7QUFLekMsTUFBTSxPQUFPLDRCQUE0QjtJQVV2QyxZQUNVLElBQWdCLEVBRXhCLGFBRUM7UUFKTyxTQUFJLEdBQUosSUFBSSxDQUFZO1FBTXhCLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsYUFBYSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUM7UUFDcEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxhQUFhLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQztRQUNwRCxJQUFJLENBQUMsV0FBVyxHQUFHLGFBQWEsQ0FBQyxHQUFHLEdBQUcsWUFBWSxDQUFDO1FBQ3BELElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDLEdBQUcsR0FBRyxjQUFjLENBQUM7UUFDeEQsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGFBQWEsQ0FBQyxHQUFHLEdBQUcsb0JBQW9CLENBQUM7SUFDckUsQ0FBQztJQUVELFFBQVEsQ0FBQyxTQUFpQixFQUFFLEtBQWE7UUFDdkMsT0FBTyxJQUFJLENBQUMsSUFBSTthQUNiLEdBQUcsQ0FDRixJQUFJLENBQUMsV0FBVztZQUNkLGNBQWMsU0FBUyw0QkFBNEIsS0FBSyxFQUFFLENBQzdEO2FBQ0EsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVELFVBQVUsQ0FBQyxjQUtWO1FBQ0MsT0FBTyxJ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YUksTUFBTTsyQkFBQyxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZmlyc3QgfSBmcm9tICdyeGpzJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCcsXG59KVxuZXhwb3J0IGNsYXNzIE5vZGVib290T2F1dGgyU3RhcnRlclNlcnZpY2Uge1xuICBjb25maWd1cmF0aW9uOiB7XG4gICAgYXBpOiBzdHJpbmc7XG4gIH07XG4gIGF1dGhVc2VyQXBpOiBzdHJpbmc7XG4gIGF1dGhSb2xlQXBpOiBzdHJpbmc7XG4gIGF1dGhQYXJ0QXBpOiBzdHJpbmc7XG4gIGF1dGhDbGllbnRBcGk6IHN0cmluZztcbiAgYXV0aEFwcGxpY2F0aW9uQXBpOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxuICAgIEBJbmplY3QoJ2NvbmZpZ3VyYXRpb24nKVxuICAgIGNvbmZpZ3VyYXRpb246IHtcbiAgICAgIGFwaTogc3RyaW5nO1xuICAgIH1cbiAgKSB7XG4gICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICB0aGlzLmF1dGhVc2VyQXBpID0gY29uZmlndXJhdGlvbi5hcGkgKyAnL2F1dGgvdXNlcic7XG4gICAgdGhpcy5hdXRoUm9sZUFwaSA9IGNvbmZpZ3VyYXRpb24uYXBpICsgJy9hdXRoL3JvbGUnO1xuICAgIHRoaXMuYXV0aFBhcnRBcGkgPSBjb25maWd1cmF0aW9uLmFwaSArICcvYXV0aC9wYXJ0JztcbiAgICB0aGlzLmF1dGhDbGllbnRBcGkgPSBjb25maWd1cmF0aW9uLmFwaSArICcvYXV0aC9jbGllbnQnO1xuICAgIHRoaXMuYXV0aEFwcGxpY2F0aW9uQXBpID0gY29uZmlndXJhdGlvbi5hcGkgKyAnL2F1dGgvYXBwbGljYXRpb24gJztcbiAgfVxuXG4gIGdldFVzZXJzKHBhZ2VJbmRleDogbnVtYmVyLCBvcmRlcjogc3RyaW5nKTogT2JzZXJ2YWJsZTxVc2VyUGFnaW5hdGlvblJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8VXNlclBhZ2luYXRpb25SZXN1bHQ+KFxuICAgICAgICB0aGlzLmF1dGhVc2VyQXBpICtcbiAgICAgICAgICBgP3BhZ2VJbmRleD0ke3BhZ2VJbmRleH0mJml0ZW1zUGVyUGFnZT0yMCYmb3JkZXI9JHtvcmRlcn1gXG4gICAgICApXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIGNyZWF0ZVVzZXIoY3JlYXRlVXNlckRhdGE6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBwYXNzd29yZDogc3RyaW5nO1xuICAgIHJvbGVzOiBCYXNpY1JvbGVbXTtcbiAgfSkge1xuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLmF1dGhVc2VyQXBpLCBjcmVhdGVVc2VyRGF0YSkucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIHVwZGF0ZVBhc3N3b3JkKHVzZXJJZDogbnVtYmVyLCBuZXdQYXNzd29yZDogc3RyaW5nLCBvbGRQYXNzd29yZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLnB1dChgJHt0aGlzLmF1dGhVc2VyQXBpfS8ke3VzZXJJZH0vcGFzc3dvcmRgLCB7XG4gICAgICAgIG5ld1Bhc3N3b3JkLFxuICAgICAgICBvbGRQYXNzd29yZCxcbiAgICAgIH0pXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJSb2xlcyh1c2VySWQ6IG51bWJlciwgcm9sZXM6IEJhc2ljUm9sZVtdKSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLnB1dChgJHt0aGlzLmF1dGhVc2VyQXBpfS8ke3VzZXJJZH0vcm9sZWAsIHsgcm9sZXMgfSlcbiAgICAgIC5waXBlKGZpcnN0KCkpO1xuICB9XG5cbiAgZGVsZXRlVXNlcihzdWJqZWN0SWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKGAke3RoaXMuYXV0aFVzZXJBcGl9LyR7c3ViamVjdElkfWApLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICB1cGRhdGVVc2VyKHN1YmplY3RJZDogbnVtYmVyLCB1cGRhdGVCb2R5OiBVc2VyVXBkYXRlQm9keSkge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5wdXQoYCR7dGhpcy5hdXRoVXNlckFwaX0vJHtzdWJqZWN0SWR9YCwgdXBkYXRlQm9keSlcbiAgICAgIC5waXBlKGZpcnN0KCkpO1xuICB9XG5cbiAgZ2V0VXNlclByb2ZpbGUoKTogT2JzZXJ2YWJsZTxVc2VyUHJvZmlsZVJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8VXNlclByb2ZpbGVSZXN1bHQ+KGAke3RoaXMuYXV0aFVzZXJBcGl9L3Byb2ZpbGUvbWVgKVxuICAgICAgLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICBnZXRSb2xlc0Jhc2ljKCk6IE9ic2VydmFibGU8Um9sZVJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8Um9sZVJlc3VsdD4odGhpcy5hdXRoUm9sZUFwaSArICc/YmFzaWM9dHJ1ZScpXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIGNyZWF0ZVJvbGUoaWRlbnRpZmllcjogc3RyaW5nLCBhbGxvd2VkT2JqZWN0OiBSZWNvcmQ8c3RyaW5nLCBPcHRpb25bXT4pIHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucG9zdCh0aGlzLmF1dGhSb2xlQXBpLCB7IGlkZW50aWZpZXIsIGFsbG93ZWRPYmplY3QgfSlcbiAgICAgIC5waXBlKGZpcnN0KCkpO1xuICB9XG5cbiAgdXBkYXRlUm9sZU9wdGlvbnMoXG4gICAgcm9sZUlkOiBudW1iZXIsXG4gICAgbmV3QWxsb3dlZE9iamVjdDogUmVjb3JkPHN0cmluZywgT3B0aW9uW10+LFxuICAgIG9yaWdpbmFsQWxsb3dlZE9iamVjdDogUmVjb3JkPHN0cmluZywgT3B0aW9uW10+XG4gICkge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5wdXQodGhpcy5hdXRoUm9sZUFwaSArIGAvJHtyb2xlSWR9L29wdGlvbmAsIHtcbiAgICAgICAgbmV3QWxsb3dlZE9iamVjdCxcbiAgICAgICAgb3JpZ2luYWxBbGxvd2VkT2JqZWN0LFxuICAgICAgfSlcbiAgICAgIC5waXBlKGZpcnN0KCkpO1xuICB9XG5cbiAgZGVsZXRlUm9sZShyb2xlSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKHRoaXMuYXV0aFJvbGVBcGkgKyBgLyR7cm9sZUlkfWApLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICBnZXRSb2xlcyhwYWdlSW5kZXg6IG51bWJlciwgb3JkZXI6IHN0cmluZyk6IE9ic2VydmFibGU8Um9sZVBhZ2luYXRpb25SZXN1bHQ+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAuZ2V0PFJvbGVQYWdpbmF0aW9uUmVzdWx0PihcbiAgICAgICAgdGhpcy5hdXRoUm9sZUFwaSArXG4gICAgICAgICAgYD9wYWdlSW5kZXg9JHtwYWdlSW5kZXh9JiZpdGVtc1BlclBhZ2U9MjAmJm9yZGVyPSR7b3JkZXJ9YFxuICAgICAgKVxuICAgICAgLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICBnZXRQYXJ0c0Jhc2ljKCk6IE9ic2VydmFibGU8T3B0aW9uUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPcHRpb25SZXN1bHQ+KHRoaXMuYXV0aFBhcnRBcGkgKyBgP2Jhc2ljPXRydWVgKVxuICAgICAgLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICBnZXRQYXJ0cyhwYWdlSW5kZXg6IG51bWJlciwgb3JkZXI6IHN0cmluZyk6IE9ic2VydmFibGU8UGFydFBhZ2luYXRpb25SZXN1bHQ+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAuZ2V0PFBhcnRQYWdpbmF0aW9uUmVzdWx0PihcbiAgICAgICAgdGhpcy5hdXRoUGFydEFwaSArXG4gICAgICAgICAgYD9wYWdlSW5kZXg9JHtwYWdlSW5kZXh9JiZpdGVtc1BlclBhZ2U9MjAmJm9yZGVyPSR7b3JkZXJ9YFxuICAgICAgKVxuICAgICAgLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICB1cGRhdGVQYXJ0T3B0aW9ucyhcbiAgICBwYXJ0SWQ6IG51bWJlcixcbiAgICBuZXdQYXJ0T3B0aW9uczogT3B0aW9uW10sXG4gICAgb3JpZ2luYWxQYXJ0T3B0aW9uczogT3B0aW9uW11cbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLnB1dCh0aGlzLmF1dGhQYXJ0QXBpICsgYC8ke3BhcnRJZH0vb3B0aW9uYCwge1xuICAgICAgICBuZXdQYXJ0T3B0aW9ucyxcbiAgICAgICAgb3JpZ2luYWxQYXJ0T3B0aW9ucyxcbiAgICAgIH0pXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIGRlbGV0ZVBhcnQocGFydElkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZSh0aGlzLmF1dGhQYXJ0QXBpICsgYC8ke3BhcnRJZH1gKTtcbiAgfVxuXG4gIGNyZWF0ZVBhcnQocGFydElkZW50aWZpZXI6IHN0cmluZywgYXBwbGljYXRpb25zX2lkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5hdXRoUGFydEFwaSwge1xuICAgICAgcGFydElkZW50aWZpZXIsXG4gICAgICBhcHBsaWNhdGlvbnNfaWQsXG4gICAgfSk7XG4gIH1cblxuICBnZXRDbGllbnRzKFxuICAgIHBhZ2VJbmRleDogbnVtYmVyLFxuICAgIG9yZGVyOiBzdHJpbmdcbiAgKTogT2JzZXJ2YWJsZTxDbGllbnRQYWdpbmF0aW9uUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxDbGllbnRQYWdpbmF0aW9uUmVzdWx0PihcbiAgICAgICAgdGhpcy5hdXRoQ2xpZW50QXBpICtcbiAgICAgICAgICBgP3BhZ2VJbmRleD0ke3BhZ2VJbmRleH0mJml0ZW1zUGVyUGFnZT0yMCYmb3JkZXI9JHtvcmRlcn1gXG4gICAgICApXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIGNyZWF0ZUNsaWVudChjcmVhdGVDbGllbnREYXRhOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGlkZW50aWZpZXI6IHN0cmluZztcbiAgICByb2xlczogQmFzaWNSb2xlW107XG4gIH0pOiBPYnNlcnZhYmxlPENsaWVudENyZWF0ZVJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5wb3N0PENsaWVudENyZWF0ZVJlc3VsdD4odGhpcy5hdXRoQ2xpZW50QXBpLCBjcmVhdGVDbGllbnREYXRhKVxuICAgICAgLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICBkZWxldGVDbGllbnQoc3ViamVjdElkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZShgJHt0aGlzLmF1dGhDbGllbnRBcGl9LyR7c3ViamVjdElkfWApLnBpcGUoZmlyc3QoKSk7XG4gIH1cblxuICB1cGRhdGVDbGllbnRSb2xlcyhjbGllbnRJZDogbnVtYmVyLCByb2xlczogQmFzaWNSb2xlW10pIHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucHV0KGAke3RoaXMuYXV0aENsaWVudEFwaX0vJHtjbGllbnRJZH0vcm9sZWAsIHsgcm9sZXMgfSlcbiAgICAgIC5waXBlKGZpcnN0KCkpO1xuICB9XG5cbiAgdXBkYXRlQ2xpZW50KHN1YmplY3RJZDogbnVtYmVyLCB1cGRhdGVCb2R5OiBDbGllbnRVcGRhdGVCb2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLnB1dChgJHt0aGlzLmF1dGhDbGllbnRBcGl9LyR7c3ViamVjdElkfWAsIHVwZGF0ZUJvZHkpXG4gICAgICAucGlwZShmaXJzdCgpKTtcbiAgfVxuXG4gIGdldEFwcGxpY2F0aW9ucygpOiBPYnNlcnZhYmxlPEFwcGxpY2F0aW9uUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXBwbGljYXRpb25SZXN1bHQ+KHRoaXMuYXV0aEFwcGxpY2F0aW9uQXBpKTtcbiAgfVxuXG4gIGdldCBhcGlVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5hcGk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIEFwcGxpY2F0aW9uUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBBcHBsaWNhdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcGxpY2F0aW9uIHtcbiAgaWQ6IG51bWJlcjtcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudFVwZGF0ZUJvZHkge1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpZW50IHtcbiAgaWQ6IG51bWJlcjtcbiAgc3ViamVjdElkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xuICByb2xlczogUm9sZVtdO1xufVxuXG5pbnRlcmZhY2UgQ2xpZW50Q3JlYXRlUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBDbGllbnRDcmVhdGVDb250ZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudENyZWF0ZUNvbnRlbnQge1xuICBhY2Nlc3NfdG9rZW46IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENsaWVudFBhZ2luYXRpb25SZXN1bHQge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIGNvZGU6IG51bWJlcjtcbiAgY29udGVudD86IENsaWVudFBhZ2luYXRpb25Db250ZW50O1xufVxuXG5pbnRlcmZhY2UgQ2xpZW50UGFnaW5hdGlvbkNvbnRlbnQge1xuICBpdGVtczogQ2xpZW50W107XG4gIHBhZ2VJbmRleDogbnVtYmVyO1xuICBpdGVtc1BlclBhZ2U6IG51bWJlcjtcbiAgdG90YWxJdGVtczogbnVtYmVyO1xuICB0b3RhbFBhZ2VzOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBPcHRpb25SZXN1bHQge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIGNvZGU6IG51bWJlcjtcbiAgY29udGVudD86IFBhcnRbXTtcbn1cblxuaW50ZXJmYWNlIFBhcnRQYWdpbmF0aW9uUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBQYXJ0UGFnaW5hdGlvbkNvbnRlbnQ7XG59XG5cbmludGVyZmFjZSBQYXJ0UGFnaW5hdGlvbkNvbnRlbnQge1xuICBpdGVtczogUGFydFtdO1xuICBwYWdlSW5kZXg6IG51bWJlcjtcbiAgaXRlbXNQZXJQYWdlOiBudW1iZXI7XG4gIHRvdGFsSXRlbXM6IG51bWJlcjtcbiAgdG90YWxQYWdlczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJVcGRhdGVCb2R5IHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVXNlclBhZ2luYXRpb25SZXN1bHQge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIGNvZGU6IG51bWJlcjtcbiAgY29udGVudD86IFBhZ2luYXRpb25Vc2VyQ29udGVudDtcbn1cblxuaW50ZXJmYWNlIFVzZXJQcm9maWxlUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBVc2VyO1xufVxuXG5pbnRlcmZhY2UgUGFnaW5hdGlvblVzZXJDb250ZW50IHtcbiAgaXRlbXM6IFVzZXJbXTtcbiAgcGFnZUluZGV4OiBudW1iZXI7XG4gIGl0ZW1zUGVyUGFnZTogbnVtYmVyO1xuICB0b3RhbEl0ZW1zOiBudW1iZXI7XG4gIHRvdGFsUGFnZXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgc3ViamVjdElkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgcm9sZXM6IFJvbGVVc2VyW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm9sZVVzZXIge1xuICBpZDogbnVtYmVyO1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIHBhcnRzOiBCYXNpY1BhcnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1BhcnQge1xuICBpZDogbnVtYmVyO1xuICBhcHBsaWNhdGlvblBhcnROYW1lOiBzdHJpbmc7XG4gIGFsbG93ZWQ6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2ljUm9sZSB7XG4gIGlkOiBudW1iZXI7XG4gIGlkZW50aWZpZXI6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJvbGVQYWdpbmF0aW9uUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBSb2xlUGFnaW5hdGlvbkNvbnRlbnQ7XG59XG5cbmludGVyZmFjZSBSb2xlUGFnaW5hdGlvbkNvbnRlbnQge1xuICBpdGVtczogUm9sZVtdO1xuICBwYWdlSW5kZXg6IG51bWJlcjtcbiAgaXRlbXNQZXJQYWdlOiBudW1iZXI7XG4gIHRvdGFsSXRlbXM6IG51bWJlcjtcbiAgdG90YWxQYWdlczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvbGUge1xuICBpZDogbnVtYmVyO1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIHBhcnRzOiBQYXJ0W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydCB7XG4gIGlkOiBudW1iZXI7XG4gIGFwcGxpY2F0aW9uUGFydE5hbWU6IHN0cmluZztcbiAgYWxsb3dlZDogT3B0aW9uW107XG59XG5cbmludGVyZmFjZSBSb2xlUmVzdWx0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlOiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBCYXNpY1JvbGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1JvbGUge1xuICBpZDogbnVtYmVyO1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uIHtcbiAgYWxsb3dlZDogc3RyaW5nO1xuICBpZDogbnVtYmVyO1xufVxuIl19